{"version":3,"file":"alpine-ripple.js","sources":["../src/js/utils.js","../src/js/ripple.js","../builds/cdn.js"],"sourcesContent":["export const getCustomColorFromModifiers = modifiers => {\n    if (! modifiers.includes('color')) {\n        return '';\n    }\n\n    const nextModifier = modifiers[modifiers.indexOf('color') + 1] || 'invalid-color';\n    if (nextModifier.indexOf('#') === 0 || nextModifier.indexOf('rgb') === 0) {\n        return nextModifier;\n    }\n\n    return nextModifier.indexOf('bg') === 0\n        ? nextModifier\n        : `bg-${nextModifier}`;\n};\n\nexport const getCustomRadiusFromModifiers = modifiers => {\n    if (! modifiers.includes('radius')) {\n        return '';\n    }\n\n    let nextModifier = modifiers[modifiers.indexOf('radius') + 1] || 'invalid-radius';\n\n    // _ allows us to use decimals, such as 0.5.\n    nextModifier = nextModifier.replace('_', '.');\n\n    // Separate the numeric value from the unit in nextModifier.\n    // Possible values for nextModifier: 50, 50.5, 50.5px, 50px, 50%, 50rem, 50em\n    const numericValue = nextModifier.match(/^[0-9]+(\\.[0-9]+)?/)[0];\n    let unit = nextModifier.replace(numericValue, '');\n    if (! unit) {\n        unit = '%';\n    }\n\n    return `${numericValue}${unit}`;\n}\n\n/**\n * Convert an object of style properties to a string of CSS.\n *\n * @param {Object} styles\n * @returns {string}\n */\nexport const toStyles = styles => Object.entries(styles).map(([key, value]) => `${formatStyleKey(key)}: ${value}`).join(';');\n\n/**\n * Convert a style key to a CSS property.\n * Example: backgroundColor -> background-color\n *\n * @param {string} key\n * @returns {string}\n */\nconst formatStyleKey = key => key.replace(/([A-Z])/g, '-$1').toLowerCase();\n\n/**\n * Some events, such as a right click or ctrl + left click won't trigger a mouseup event,\n * so we need to prevent the ripple from being added in those cases.\n *\n * @param {MouseEvent} event\n * @returns {boolean}\n */\nexport const willHaveAMouseUpEvent = event => {\n    if (event.ctrlKey) {\n        return false;\n    }\n\n    return event.button === 0 || event.button === 1;\n};\n","import { getCustomColorFromModifiers, getCustomRadiusFromModifiers, willHaveAMouseUpEvent, toStyles } from './utils';\n\n/**\n * Add a ripple effect to the element.\n *\n * @param {MouseEvent} event\n * @param {HTMLElement} el\n * @param {Array} modifiers\n */\nexport const addRipple = (event, el, modifiers) => {\n    if (! willHaveAMouseUpEvent(event)) {\n        return;\n    }\n\n    const ripple = document.createElement('span');\n    ripple.classList.add('ripple');\n\n    el.appendChild(ripple);\n\n    const size = ripple.offsetWidth,\n        position = ripple.getBoundingClientRect(),\n        innerRipple = document.createElement('span');\n\n    const x = event.pageX - position.left - (size / 2),\n        y = event.pageY - position.top - (size / 2);\n\n    const style = {\n        top: `${y}px`,\n        left: `${x}px`,\n        width: `${size}px`,\n        height: `${size}px`,\n    };\n\n    const color = getCustomColorFromModifiers(modifiers);\n    if (color.indexOf('bg-') === 0) {\n        // Prefix with '!' for !important (requires Tailwind).\n        innerRipple.classList.add(`!${color}`);\n    } else if (color.indexOf('#') === 0 || color.indexOf('rgb') === 0) {\n        style['--ripple-color'] = color;\n    }\n\n    const radius = getCustomRadiusFromModifiers(modifiers);\n    if (radius) {\n        style['--ripple-radius'] = radius;\n    }\n\n    ripple.appendChild(innerRipple);\n    innerRipple.setAttribute('style', toStyles(style));\n};\n\n/**\n * Remove the ripple from the element.\n *\n * @param {HTMLElement} el\n */\nexport const removeRipple = el => {\n    setTimeout(() => {\n        // We are only removing the first instance to prevent ripples from subsequent clicks\n        // being removed too quickly before the ripple effect can properly be seen.\n        const ripple = el.querySelector('.ripple');\n\n        ripple && ripple.remove();\n    }, 1000);\n};\n\nfunction Ripple(Alpine) {\n    Alpine.directive('ripple', (el, { modifiers, expression }, { cleanup }) => {\n        const clickHandler = event => addRipple(event, el, modifiers);\n        const mouseUpHandler = () => removeRipple(el);\n\n        el.addEventListener('mousedown', clickHandler);\n        el.addEventListener('mouseup', mouseUpHandler);\n\n        cleanup(() => {\n            el.removeEventListener('mousedown', clickHandler);\n            el.removeEventListener('mouseup', mouseUpHandler);\n        });\n    });\n}\n\nexport default Ripple;\n","import ripple from '../src/js/ripple';\nimport '../src/css/styles.css';\n\ndocument.addEventListener('alpine:initializing', () => {\n    ripple(window.Alpine);\n});\n"],"names":["getCustomColorFromModifiers","modifiers","includes","nextModifier","indexOf","getCustomRadiusFromModifiers","replace","numericValue","match","unit","toStyles","styles","Object","entries","map","key","value","formatStyleKey","join","toLowerCase","willHaveAMouseUpEvent","event","ctrlKey","button","addRipple","el","ripple","document","createElement","classList","add","appendChild","size","offsetWidth","position","getBoundingClientRect","innerRipple","x","pageX","left","y","pageY","top","style","width","height","color","radius","setAttribute","removeRipple","setTimeout","querySelector","remove","Ripple","Alpine","directive","expression","cleanup","clickHandler","mouseUpHandler","addEventListener","removeEventListener","window"],"mappings":"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"}